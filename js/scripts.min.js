$(document).ready(function(){function e(){$wH=$(window).height(),$wW=$(window).width()}jQuery.fn.reverse=function(){return this.pushStack(this.get().reverse(),arguments)},$html=$("html"),$body=$("body"),$loading=$("#loading"),$header=$("#header"),$nav=$("#nav"),$menu=$("#menu"),$footer=$("#footer"),$droid=$("#droid"),$dots=$("#dots"),$SECTIONS=$("#sections"),$sections=$SECTIONS.find("section"),$scrollBlocks=$("#scroll-blocks"),$promo=$("#promo"),$hello=$("#hello"),$naturals=$("#naturals"),$toothpaste=$("#toothpaste"),$contents=$("#contents"),$contentsSlider=$("#contents-slider"),$research=$("#research"),$30sec=$("#s30sec"),$showcase=$("#showcase"),$feedback=$("#feedback"),$PRODUCTS=$("#products"),$PRODUCT=$("#product"),e(),$(window).on("resize",e);var t=new LazyLoad({elements_selector:".lazy"});function s(e,i=!0,a){console.log(e),$droid.find(".droid-offset").css({"margin-bottom":0}),$droid.click(function(){s("feedback")});var n=document.getElementById(e);if(n&&n.querySelectorAll(".lazy").forEach(function(e){t.load(e)}),"products"==e||"product"==e)$body.removeClass("scrolled"),$body.addClass("scrolled-2"),$SECTIONS.addClass("pushed"),$sections.removeClass("active"),$droid.addClass("open"),$dots.removeClass("open"),"products"==e&&($PRODUCTS.addClass("pushed"),$PRODUCT.addClass("pushed"),setTimeout(function(){$PRODUCTS.removeClass("pushed")},800)),"product"==e&&($PRODUCTS.addClass("pushed"),$PRODUCT.addClass("pushed"),$PRODUCT.find(".product-page").removeClass("active"),$PRODUCT.find(".product-page .product-carousel .carousel-cell").removeClass("is-selected"),setTimeout(function(){$PRODUCT.removeClass("pushed"),$PRODUCT.scrollTop(0),$PRODUCT.find("#"+a+" .product-carousel .carousel-cell").addClass("is-selected"),$PRODUCT.find("#"+a+" .ingredients-carousel").flickity("resize"),$PRODUCT.find("#"+a).addClass("active")},800));else if($SECTIONS.removeClass("pushed"),$PRODUCTS.addClass("pushed"),$PRODUCT.addClass("pushed"),!$SECTIONS.hasClass("blocked")){$body.removeClass("scrolled"),$body.removeClass("scrolled-2"),$SECTIONS.addClass("blocked"),$oldID=$SECTIONS.find(".active").attr("id"),"hello"==e&&$(window).width()<=600&&("promo"==$oldID&&(e="naturals"),"naturals"==$oldID&&(e="promo")),$dots.find("div").removeClass("is-active"),$dots.find("[data-to="+e+"]").addClass("is-active"),"promo"==e&&anime.timeline().add({targets:"#promo .title-text .letter",opacity:[0,1],easing:"easeInOutQuad",duration:1600,delay:function(e,t){return 50*(t+1)}});var o=document.getElementById("droidVideo");"hello"==e?(o.currentTime=0,o.play()):o.pause(),"naturals"==e?$naturals.find(".counter").addClass("init"):($naturals.find(".counter").removeClass("init"),$naturals.find("[data-play]").hasClass("is-playing")&&$naturals.find("[data-play]").trigger("click")),"contents"==e||$contents.find("[data-play]").hasClass("is-playing")&&$contents.find("[data-play]").trigger("click"),"toothpaste"==e&&setTimeout(function(){var e=$toothpaste.find(".toothpaste-carousel").flickity(),t=e.data("flickity"),s=t.selectedIndex;t.slides.length;0==s&&e.flickity("select",1)},1e3),"contents-slider"==e&&setTimeout(function(){$contentsSlider.find(".contents-carousel").flickity().flickity("select",0)},1200),"research"==e?setTimeout(function(){$research.find(".research-list-item").addClass("is-visible")},1e3):$research.find(".research-list-item").removeClass("is-visible"),"s30sec"==e?($30secFrame=1,setTimeout(function(){s30Interval=setInterval(function(){$30sec.find(".frame-outer").addClass("animate"),$30sec.find(".dirt-scale").addClass("animate"),$30sec.find(".dirt-scale img").addClass("animate"),$30secFrame++,$30secFrame>30&&clearInterval(s30Interval),$frameActive=$30sec.find(".frame.is-active"),$frameActive.next(".frame").length&&($frameActive.next(".frame").addClass("is-active"),$frameActive.removeClass("is-active"))},200)},1500)):("undefined"!=typeof s30Interval&&clearInterval(s30Interval),setTimeout(function(){$30sec.find(".frame.is-active").removeClass("is-active"),$30sec.find(".frame:first").addClass("is-active"),$30sec.find(".frame-outer").removeClass("animate"),$30sec.find(".dirt-scale").removeClass("animate"),$30sec.find(".dirt-scale img").removeClass("animate")},800)),"showcase"==e&&($showcase.hasClass("is-third")?($showcase.removeClass("is-third"),$showcase.addClass("is-second")):$showcase.hasClass("is-first")||($showcase.removeClass("is-second"),$showcase.removeClass("is-third"),$showcase.addClass("is-first")),$showcase.addClass("blocked"),setTimeout(function(){$showcase.removeClass("blocked")},2e3)),"feedback"==e?($(".products-link").fadeOut(800),setTimeout(function(){$body.addClass("scrolled")},800)):$(".products-link").fadeIn(800),$SECTIONS.find(".active").removeClass("active"),"contents"==$oldID&&"contents-slider"==e||"contents-slider"==$oldID&&"contents"==e?$("#"+e).addClass("active"):setTimeout(function(){$("#"+e).addClass("active")},800),"showcase"!=e&&"feedback"!=e&&setTimeout(function(){$SECTIONS.removeClass("blocked")},2e3),"promo"!=e&&"hello"!=e?($droid.addClass("open"),$dots.addClass("open")):($droid.removeClass("open"),$dots.removeClass("open"))}}function i(){if($body.hasClass("loading")){if($("#nav").fitText(3.75),$sections.each(function(){$dataId=$(this).attr("id"),$dots.append('<div class="dot slide-to" data-to="'+$dataId+'"></div>')}),$(".slide-to").click(function(e){e.preventDefault(),$id=$(this).data("to"),$dataProduct=$(this).data("product"),$SECTIONS.find(".active").attr("id")!=$id&&($SECTIONS.removeClass("blocked"),$dataProduct?s($id,!0,$dataProduct):s($id),$menu.hasClass("menu-visible")&&($header.find(".menu").removeClass("close"),$header.find(".logo").removeClass("white"),$menu.removeClass("menu-visible"),$body.removeClass("menu-visible"),$menu.fadeOut(800)))}),$header.find(".menu").click(function(){$(this).hasClass("close")?($(this).removeClass("close"),$menu.fadeOut(800),$menu.removeClass("menu-visible"),$body.removeClass("menu-visible"),$header.find(".logo").removeClass("white")):($(this).addClass("close"),$menu.fadeIn(800),$body.addClass("menu-visible"),$menu.addClass("menu-visible"),$header.find(".logo").addClass("white"))}),$promo.length&&($(window).width()<$(window).height()?$waveVideo=480:$waveVideo=1080,$promo.find(".wave").html('<video class="lazy" data-src="upload/Wave_'+$waveVideo+'.mp4?v1" muted="" preload="" autoplay="" loop="" playsinline=""></video>'),$promo.find(".title-text").each(function(){$(this).html($(this).html().replace(/([^\x00-\x80]|\w)/g,"<span class='letter'>$&</span>"))}),$promo.find(".title-text").fitText(1.2),$(window).width()>600)){const e={btn:document.querySelector(".magnetic")},t={bounds:e.btn.getBoundingClientRect(),threshold:parseInt(e.btn.dataset.threshold),ratio:parseInt(e.btn.dataset.ratio),isMagnetic:!1,mouse:{x:0,y:0},ease:{x:0,y:0,scale:1,value:e.btn.dataset.ease},transform:{x:0,y:0,scale:1,max:e.btn.dataset.max},width:window.innerWidth,height:window.innerHeight,history:!1,scale:e.btn.dataset.scale},s=({pageX:e,pageY:s})=>{Object.assign(t,{mouse:{x:e,y:s},isMagnetic:a(e,s)})},i=()=>{Object.assign(t,{bounds:e.btn.getBoundingClientRect(),width:window.innerWidth,height:window.innerHeight})},a=(s,i)=>{const{bounds:a}=t,n=a.left+a.width/2,o=a.top+a.height/2,d=Math.abs(n-s),l=Math.abs(o-i),c=Math.sqrt(d*d+l*l)<a.width/2+t.threshold;return!t.history&&c?(e.btn.classList.add("is-hover"),Object.assign(t,{threshold:t.threshold*t.ratio,history:!0})):t.history&&!c&&(e.btn.classList.remove("is-hover"),Object.assign(t,{threshold:t.threshold/t.ratio,history:!1})),c},n=()=>{requestAnimationFrame(n);const{isMagnetic:s,transform:i,mouse:a,width:o,height:d,ease:l,max:c,scale:r}=t;i.x=s?(a.x-o/2)/o*i.max:0,i.y=s?(a.y-d/2)/d*i.max:0,i.scale=s?r:1,l.x+=(i.x-l.x)*l.value,l.y+=(i.y-l.y)*l.value,l.scale+=(i.scale-l.scale)*l.value,Object.assign(e.btn.style,{transform:`\n\t\t\ttranslate(\n\t\t\t\t${l.x.toFixed(2)}px,\n\t\t\t\t${l.y.toFixed(2)}px\n\t\t\t)\n\t\t\ttranslateZ(0)\n\t\t\tscale(\n\t\t\t\t${l.scale.toFixed(2)}\n\t\t\t)`})};document.addEventListener("mousemove",s),window.addEventListener("resize",i),n()}if($hello.length)$(window).width()>1280?$robotVideo=1080:$(window).width()>640?$robotVideo=720:$robotVideo=480,$hello.find(".droid").html('<video id="droidVideo" class="lazy" data-src="upload/droid_'+$robotVideo+'.mp4?v1" muted="" preload=""></video>'),document.getElementById("droidVideo").addEventListener("ended",function(e){s("naturals")},!1);if($naturals.length&&($naturals.find(".percent").fitText(.21),$naturals.find(".label").fitText(.75),$naturals.find(".sentences").fitText(1.75),$naturals.find(".cnt").append('<span class="counter"><ul class="n1"><li>0</li><li>1</li><li>2</li><li>3</li><li>4</li><li>5</li><li>6</li><li>7</li><li>8</li><li>9</li></ul><ul class="n2"><li>0</li><li>1</li><li>2</li><li>3</li><li>4</li><li>5</li><li>6</li><li>7</li><li>8</li><li>9</li></ul></span>'),setTimeout(function(){$naturals.find(".video-inner-2").prepend('<video class="lazy" data-src="upload/naturals.mp4?v2" id="naturalVideo2" preload="" poster="upload/naturals-poster.jpg"></video>');var e=document.getElementById("naturalVideo2");function t(t){t?e.play():e.pause()}$naturals.find(".button").click(function(){e.mozRequestFullScreen?e.mozRequestFullScreen():e.webkitRequestFullScreen(Element.ALLOW_KEYBOARD_INPUT),e.play()}),e.addEventListener("mozfullscreenchange",function(){t(document.mozFullScreen)},!1),e.addEventListener("webkitfullscreenchange",function(){t(document.webkitIsFullScreen)},!1)},2e3)),$toothpaste.length){$toothpaste.find(".name").fitText(.55),$toothpaste.find(".natural").fitText(1.5),$toothpaste.find(".subtitles").fitText(1.75),$toothpaste.find(".cnt").append('<div class="counter"><div class="n1"><div class="num-item">0</div><div class="num-item">1</div><div class="num-item">2</div><div class="num-item">3</div><div class="num-item">4</div><div class="num-item">5</div><div class="num-item">6</div><div class="num-item">7</div><div class="num-item">8</div><div class="num-item">9</div></div><div class="n2"><div class="num-item">0</div><div class="num-item">1</div><div class="num-item">2</div><div class="num-item">3</div><div class="num-item">4</div><div class="num-item">5</div><div class="num-item">6</div><div class="num-item">7</div><div class="num-item">8</div><div class="num-item">9</div></div><span>,</span><div class="n3"><div class="num-item">0</div><div class="num-item">1</div><div class="num-item">2</div><div class="num-item">3</div><div class="num-item">4</div><div class="num-item">5</div><div class="num-item">6</div><div class="num-item">7</div><div class="num-item">8</div><div class="num-item">9</div></div></div>'),$toothpaste.find(".key-visual").each(function(){$keyVisualDir=$(this).data("product"),$(this).find("div").each(function(){$keyVisualName=$(this).attr("class"),$(this).html('<span class="magnify"><img class="lazy" data-src="upload/kv/'+$keyVisualDir+"/"+$keyVisualName+'.png?v1"/></span>')}),$("#"+$keyVisualDir).length&&$("#"+$keyVisualDir).find(".key-visual").prepend($(this).html())}),$toothpaste.find(".toothpaste-carousel").on("ready.flickity",function(){$toothpaste.find(".toothpaste-carousel").append('<div class="slider-range"><input type="hidden" class="slider-input" value="0" /></div>'),$toothpaste.find(".slider-input").jRange({from:0,to:$toothpaste.find(".toothpaste-carousel .carousel-cell").length,step:1,showLabels:!1,showScale:!1,width:.2*$(window).height(),onstatechange:function(e){$toothpaste.find(".toothpaste-carousel").flickity("select",e)}}),$toothpaste.find(".slider-input").click(function(){$thisVal=$(this).val(),$(this).jRange("setValue",$thisVal)})});var e=$toothpaste.find(".toothpaste-carousel").flickity({cellAlign:"center",pageDots:!1,selectedAttraction:.01,friction:.15}),t=e.data("flickity");$dotIndex=1,$toothpaste.find(".key-visual").each(function(){$dotColor=$toothpaste.find(".name-"+$dotIndex+" .line-3").data("color"),$toothpaste.find(".dots").append('<div class="dot dot-'+$dotIndex+' lazy" data-bg="url(/img/dot-'+$dotIndex+'.png)"></div>'),$dotIndex++}),setTimeout(function(){},0),$toothpaste.find(".dot").click(function(){$slideQ=$(this).index(),e.flickity("select",$slideQ+1)}),e.on("select.flickity",function(s,i){var a=i,n=t.slides.length;$offsetTop=0,$namesHeight=0,$toothpaste.find(".names .name").removeClass("is-active"),setTimeout(function(){$toothpaste.find(".names .name").removeClass("is-active"),$toothpaste.find(".names .name-"+a).addClass("is-active"),$toothpaste.find(".button").data("product",$toothpaste.find(".names .name.is-active").data("product")),$toothpaste.find(".button").attr("id","button-"+$toothpaste.find(".names .name.is-active").data("product"))},1200),$naturalPercent=$toothpaste.find(".is-selected").data("natural"),$naturalPercent=$naturalPercent.split("|"),$toothpaste.find(".n1").attr("class","n1 c"+$naturalPercent[0]),$toothpaste.find(".n2").attr("class","n2 c"+$naturalPercent[1]),$toothpaste.find(".n3").attr("class","n3 c"+$naturalPercent[2]),$offsetTop=0,$toothpaste.find(".sentences .sentence").removeClass("is-active"),setTimeout(function(){$toothpaste.find(".sentences .sentence-"+a).addClass("is-active")},1200),$buttonColor=$toothpaste.find(".names .name.is-active [data-color]").data("color"),$toothpaste.find(".button svg .border").css({stroke:"#"+$buttonColor}),$toothpaste.find(".button svg+.word").css({fill:"#"+$buttonColor}),$toothpaste.find(".dots .dot").removeClass("is-active"),$toothpaste.find(".dots .dot-"+a).addClass("is-active"),a==n-2?$toothpaste.find(".right").fadeOut(800):$toothpaste.find(".right").fadeIn(800),a<2?$toothpaste.find(".left").fadeOut(800):$toothpaste.find(".left").fadeIn(800),a<1&&e.flickity("select",1),0==a&&e.flickity("select",1),a==n-1&&e.flickity("select",n-2),$toothpaste.find(".slider-input").val(a).click()}),$toothpaste.find(".arrow").click(function(){$(this).hasClass("right")?e.flickity("next"):e.flickity("previous")}),$body.mousemove(function(e){var t=0,s=0;!$toothpaste.hasClass("freeze")&&$toothpaste.hasClass("active")&&($toothpaste.addClass("freeze"),t=(e.pageX-$(window).width()/2)/20,s=(e.pageY-$(window).height()/2)/20,$toothpaste.find(".is-selected .key-visual .magnify").reverse().each(function(){$(this).css({transform:"translate("+t+"px, "+s+"px)"}),t*=.8,s*=.8}),setTimeout(function(){$toothpaste.removeClass("freeze")},100))})}if($contents.length){$contents.find(".percent").fitText(.21),$contents.find(".label").fitText(.75),$contents.find(".sentences").fitText(1.75);var i=$contents.find(".timelapse");$(window).width()<=600?$progressSize=.7*$(window).width():$(window).width()>$(window).height()?$progressSize=.34*$(window).width():$progressSize=.6*$(window).width(),i.circleProgress({startAngle:-Math.PI,size:$progressSize,value:0,fill:{color:"#6C9E3F"},emptyFill:"rgba(0, 0, 0, 0)",animation:{duration:300,easing:"linear"}}),setTimeout(function(){$contents.find(".video-inner").prepend('<video class="lazy" data-src="upload/contents.mp4?v2" id="contentsVideo" preload="" poster="upload/contents-poster.jpg"></video>');var e=document.getElementById("contentsVideo");function t(t){t?($contents.find("[data-play]").addClass("is-playing"),e.play()):($contents.find("[data-play]").removeClass("is-playing"),e.pause())}$contents.find("[data-play]").click(function(){$(this).hasClass("is-playing")?($(this).removeClass("is-playing"),e.pause()):($(this).addClass("is-playing"),e.play())}),e.addEventListener("timeupdate",function(t){$cur=e.currentTime/216,$cur>1&&($cur=1),i.circleProgress("value",$cur),$contents.find(".sentences p").removeClass("sub-active"),e.currentTime>=0&&e.currentTime<9?$contents.find(".sentence-1").addClass("sub-active").addClass("sub-height"):e.currentTime>=9&&e.currentTime<27?$contents.find(".sentence-2").addClass("sub-active").addClass("sub-height"):e.currentTime>=27&&e.currentTime<65?$contents.find(".sentence-3").addClass("sub-active").addClass("sub-height"):e.currentTime>=65&&e.currentTime<109?$contents.find(".sentence-4").addClass("sub-active").addClass("sub-height"):e.currentTime>=109&&e.currentTime<135?$contents.find(".sentence-5").addClass("sub-active").addClass("sub-height"):e.currentTime>=135&&e.currentTime<161?$contents.find(".sentence-6").addClass("sub-active").addClass("sub-height"):e.currentTime>=161&&e.currentTime<202?$contents.find(".sentence-7").addClass("sub-active").addClass("sub-height"):e.currentTime>=202&&$contents.find(".sentence-8").addClass("sub-active").addClass("sub-height")},!1),e.addEventListener("ended",function(e){$contents.find("[data-play]").removeClass("is-playing"),$contents.find(".sentences p").removeClass("sub-active").removeClass("sub-height"),$contents.find(".sentence-1").addClass("sub-active").addClass("sub-height"),s("contents-slider")},!1),$contents.find(".resize").click(function(){e.mozRequestFullScreen?e.mozRequestFullScreen():e.webkitRequestFullScreen(Element.ALLOW_KEYBOARD_INPUT)}),e.addEventListener("mozfullscreenchange",function(){t(document.mozFullScreen)},!1),e.addEventListener("webkitfullscreenchange",function(){t(document.webkitIsFullScreen)},!1),$contents.find(".video-inner-2").prepend('<video class="lazy" data-src="upload/contents.mp4?v2" id="contentsVideo2" preload="" poster="upload/contents-poster.jpg"></video>');var a=document.getElementById("contentsVideo2");function n(e){e?a.play():a.pause()}$contents.find(".button").click(function(){a.mozRequestFullScreen?a.mozRequestFullScreen():a.webkitRequestFullScreen(Element.ALLOW_KEYBOARD_INPUT),a.play()}),a.addEventListener("mozfullscreenchange",function(){n(document.mozFullScreen)},!1),a.addEventListener("webkitfullscreenchange",function(){n(document.webkitIsFullScreen)},!1)},2e3)}if($contentsSlider.length){$contentsSlider.find(".percent").fitText(.21),$contentsSlider.find(".label").fitText(.75),$contentsSlider.find(".sentences").fitText(1.55),$contentsSlider.find(".img").each(function(){$dataImg=$(this).data("img"),$(this).html('<img class="lazy" data-src="'+$dataImg+'"/>')}),$contentsSlider.find(".contents-carousel").on("ready.flickity",function(){$contentsSlider.find(".contents-carousel").append('<div class="slider-range"><input type="hidden" class="slider-input" value="0" /></div>'),$contentsSlider.find(".slider-input").jRange({from:0,to:$contentsSlider.find(".contents-carousel .carousel-cell").length,step:1,showLabels:!1,showScale:!1,width:.2*$(window).height(),onstatechange:function(e){$contentsSlider.find(".contents-carousel").flickity("select",e)}}),$contentsSlider.find(".slider-input").click(function(){$thisVal=$(this).val(),$(this).jRange("setValue",$thisVal)})});var a=$contentsSlider.find(".contents-carousel").flickity({cellAlign:"left",contain:!0,pageDots:!1,selectedAttraction:.01,friction:.15}),n=a.data("flickity");$oldFlkty2=0,a.on("select.flickity",function(e,t){var s=t;n.slides.length;s>$oldFlkty2?$contentsSlider.find(".contents-carousel").addClass("process-left"):$contentsSlider.find(".contents-carousel").addClass("process-right"),$oldFlkty2=s,setTimeout(function(){$contentsSlider.find(".contents-carousel").removeClass("process-left").removeClass("process-right")},600),s>0?$contentsSlider.find(".main-text").fadeOut(800):$contentsSlider.find(".main-text").fadeIn(800),$contentsSlider.find(".slider-input").val(s).click()})}if($research.length&&($research.find(".description h3").fitText(.8),$research.find(".description p").fitText(2),$research.find(".research-list").fitText(3.5)),$30sec.length){$30sec.find(".main-text .small").fitText(.73),$30sec.find(".main-text .big").fitText(.135),$30sec.find(".main-text .middle").fitText(.4),$30sec.find(".second-text").fitText(1.55);for(var o=1;o<=30;)$30sec.find(".frame-insert").append('<img data-src="upload/30s/frame-'+o+'.png?v2" data-sec="'+o+'" class="frame lazy">'),o++;$body.mousemove(function(e){var t=0,s=0;!$30sec.hasClass("freeze")&&$30sec.hasClass("active")&&($30sec.addClass("freeze"),t=(e.pageX-$(window).width()/2)/30,s=(e.pageY-$(window).height()/2)/30,$30sec.find(".magnify").reverse().each(function(){$(this).css({transform:"translate("+t+"px, "+s+"px)"}),t*=.75,s*=.75}),setTimeout(function(){$30sec.removeClass("freeze")},100))})}if($showcase.length&&($showcase.find(".title").fitText(.5),$showcase.find(".text h3").fitText(1),$showcase.find(".text p").fitText(1.5),$body.mousemove(function(e){var t=0,s=0;!$showcase.hasClass("freeze")&&$showcase.hasClass("active")&&($showcase.addClass("freeze"),t=(e.pageX-$(window).width()/2)/20,s=(e.pageY-$(window).height()/2)/20,$showcase.hasClass("is-second")&&(t/=4,s/=4),$showcase.find(".magnify").each(function(){$(this).css({transform:"translate("+t+"px, "+s+"px)"}),$showcase.hasClass("is-first")&&(t*=.8,s*=.8)}),setTimeout(function(){$showcase.removeClass("freeze")},100))})),$feedback.length){$feedback.find(".feedback-form h3").fitText(.8),$feedback.find(".navigate").fitText(1.5),$feedback.find(".footer .block").fitText(1.25),$body.scroll(function(e){$offset=$feedback.find(".scroll-offset").offset(),$offset.top>=0&&$SECTIONS.removeClass("blocked")});const e=$feedback.find("input, textarea");e.click(function(){$(this).focus()}),e.on("input",e=>{const t=e.currentTarget;t.value?t.classList.add("isValue"):t.classList.remove("isValue")}),$feedback.find("form").submit(function(e){e.preventDefault()}),$(document).on("click touchend",function(e){$feedback.css({"-webkit-overflow-scrolling":"touch"}),$feedback.find(".scroll-offset").css({"-webkit-transform":"translate3d(0, 0, 0)"})})}if($body.removeClass("loading"),$loading.fadeOut(1e3),s("promo"),$PRODUCTS.length){function d(){$productsFilterArray=".blank",$PRODUCTS.find(".filter-item.is-selected").each(function(){$productsFilterArray+=", ."+$(this).data("filter")}),".blank"!=$productsFilterArray?($PRODUCTS.find(".catalog-item").hide(),$PRODUCTS.find($productsFilterArray).show()):$PRODUCTS.find(".catalog-item").show(),$PRODUCTS.find(".filter-item-2.is-selected").length&&($productsFilter2Array=".for-blank",$PRODUCTS.find(".filter-item-2").not(".is-selected").each(function(){$productsFilter2Array+=", ."+$(this).data("filter")}),$PRODUCTS.find($productsFilter2Array).hide())}$PRODUCTS.find(".description h3").fitText(.75),$PRODUCTS.find("[data-img]").each(function(){$dataImg=$(this).data("img"),$(this).html('<img class="lazy" data-src="'+$dataImg+'?v2"/>')}),$PRODUCTS.find(".filter-item").click(function(){$(this).toggleClass("is-selected"),d()}),$PRODUCTS.find(".filter-item-2").click(function(){$(this).toggleClass("is-selected"),d()})}if($PRODUCT.length){function l(){$wW>600?$PRODUCT.find(".product-page.active").length&&($wW=$(window).width(),$wH=$(window).height(),$top1=$html.scrollTop(),$top2=$body.scrollTop(),$top1?$top=$top1:$top=$top2,$lastActive="",$PRODUCT.find(".product-page.active .fade-block").each(function(){$topBlock=$top+.8*$(window).height(),$topBlock>=$(this).offset().top?$(this).removeClass("disabled"):$(this).addClass("disabled")}),$topBlock=$top+$(window).height(),$topBlock>=$PRODUCT.find(".product-page.active .footer").offset().top?($robotOffset=$topBlock-$PRODUCT.find(".product-page.active .footer").offset().top,$droid.find(".droid-offset").css({"margin-bottom":$robotOffset+"px"})):$droid.find(".droid-offset").css({"margin-bottom":0})):$PRODUCT.find(".product-page .fade-block").removeClass("disabled")}$PRODUCT.find(".description .name").fitText(.55),$PRODUCT.find(".description h3").fitText(1.25),$PRODUCT.find(".description p").fitText(1.25),$PRODUCT.find(".double-change").click(function(){$(this).closest(".carousel-cell").find(".double").fadeToggle(0)}),$PRODUCT.find(".feature .number").fitText(.15),$PRODUCT.find(".cols-4 .feature p").fitText(1.5),$PRODUCT.find(".cols-3 .feature p").fitText(2.1),$PRODUCT.find(".ingredients .head h3").fitText(.55),$PRODUCT.find(".ingredients .head h4").fitText(1.25),$PRODUCT.find(".ingredients .head-2 h3").fitText(1.85),$PRODUCT.find(".ingredients .head-2 h4").fitText(1.15),$PRODUCT.find(".ingredients-carousel h3").fitText(.9),$PRODUCT.find(".ingredients-carousel p").fitText(1.25),$PRODUCT.find("[data-img]").each(function(){$dataImg=$(this).data("img"),$(this).prepend('<img class="lazy" data-src="'+$dataImg+'?v2"/>')}),$PRODUCT.find(".product-page").each(function(){$thisProduct=$(this);const e=$thisProduct.find(".ingredients-carousel");e.on("ready.flickity",function(){e.append('<div class="slider-range"><input type="hidden" class="slider-input" value="0" /></div>'),$thisProduct.find(".slider-input").jRange({from:0,to:$thisProduct.find(".ingredients-carousel .carousel-cell").length,step:1,showLabels:!1,showScale:!1,width:.2*$(window).height(),onstatechange:function(e){$PRODUCT.find(".product-page.active .ingredients-carousel").flickity("select",e)}}),$thisProduct.find(".slider-input").click(function(){$thisVal=$(this).val(),$(this).jRange("setValue",$thisVal)})}),e.each(function(){$(this).flickity({cellAlign:"left",contain:!0,pageDots:!1,prevNextButtons:!1,selectedAttraction:.01,friction:.15,dragThreshold:10})}),e.on("select.flickity",function(e,t){$PRODUCT.find(".product-page.active .slider-input").val(t).click()}),e.on("touchstart",function(e,t){console.log("touchstart"),$body.css("overflow","hidden")}),e.on("touchend ",function(e,t){console.log("touchend"),$body.css("overflow","scroll")})}),$PRODUCT.find(".why .head h3, .research .head h3, .catalog .head h3, .also .head h3").fitText(1),$PRODUCT.find(".catalog .head-2 h3").fitText(1.5),$PRODUCT.find(".why .head h4").fitText(1.75),$PRODUCT.find(".why-item p").fitText(1.75),$PRODUCT.find(".footer .block").fitText(1.75),$body.mousemove(function(e){var t=0,s=0;$PRODUCT.hasClass("freeze")||$PRODUCT.hasClass("pushed")||($PRODUCT.addClass("freeze"),t=(e.pageX-$(window).width()/2)/20,s=(e.pageY-$(window).height()/2)/20,$PRODUCT.find(".is-selected .key-visual .magnify").reverse().each(function(){$(this).css({transform:"translate("+t+"px, "+s+"px)"}),t*=.8,s*=.8}),setTimeout(function(){$PRODUCT.removeClass("freeze")},100))}),$lastActiveOld="",$body.on("scroll",function(e){l()}),l()}}}$SECTIONS.mousewheel(function(e){$curBlock=$SECTIONS.find(".active"),e.originalEvent.wheelDelta>0?$nextBlock=$curBlock.prev("section"):$nextBlock=$curBlock.next("section"),$nextBlock.length&&($nextID=$nextBlock.attr("id"),s($nextID))}),$SECTIONS.swipe({swipe:function(e,t,i,a,n,o){$curBlock=$SECTIONS.find(".active"),"down"==t?($nextBlock=$curBlock.prev("section"),"feedback"===$curBlock.attr("id")&&document.body.scrollTop>40&&($nextBlock=null)):"up"==t&&($nextBlock=$curBlock.next("section")),"down"!=t&&"up"!=t||$nextBlock&&$nextBlock.length&&($nextID=$nextBlock.attr("id"),s($nextID))},threshold:20,preventDefaultEvents:!1}),$showcase.mousewheel(function(e){$showcase.hasClass("blocked")||($showcase.addClass("blocked"),e.originalEvent.wheelDelta>0?$showcase.hasClass("is-third")?($showcase.removeClass("is-third"),$showcase.addClass("is-second")):$showcase.hasClass("is-second")?($showcase.removeClass("is-second"),$showcase.addClass("is-first")):$showcase.hasClass("is-first")&&($showcase.removeClass("is-first"),$showcase.hasClass("active")&&$SECTIONS.removeClass("blocked")):$showcase.hasClass("is-second")?($showcase.removeClass("is-second"),$showcase.addClass("is-third"),$showcase.hasClass("active")&&$SECTIONS.removeClass("blocked")):$showcase.hasClass("is-first")&&($showcase.removeClass("is-first"),$showcase.addClass("is-second")),setTimeout(function(){$showcase.removeClass("blocked")},2e3))}),$showcase.swipe({swipe:function(e,t,s,i,a,n){$showcase.hasClass("blocked")||($showcase.addClass("blocked"),"down"==t?$showcase.hasClass("is-third")?($showcase.removeClass("is-third"),$showcase.addClass("is-second")):$showcase.hasClass("is-second")?($showcase.removeClass("is-second"),$showcase.addClass("is-first")):$showcase.hasClass("is-first")&&($showcase.removeClass("is-first"),$showcase.hasClass("active")&&$SECTIONS.removeClass("blocked")):"up"==t&&($showcase.hasClass("is-second")?($showcase.removeClass("is-second"),$showcase.addClass("is-third"),$showcase.hasClass("active")&&$SECTIONS.removeClass("blocked")):$showcase.hasClass("is-first")&&($showcase.removeClass("is-first"),$showcase.addClass("is-second"))),setTimeout(function(){$showcase.removeClass("blocked")},2e3))},threshold:20}),window.onload=i,setTimeout(i,2e3),$("#feedback-form").on("submit",function(e){$.ajax({type:"POST",url:"/send-form.php",data:$(this).serializeArray(),dataType:"json",success:function(e){alert("Спасибо, ваше сообщение отправлено."),$("#feedback-form")[0].reset()}})})});